<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&family=Manrope:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900"
    />
    <title>Book Appointment | Orenda Spa</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden"
      style="--select-button-svg: url('data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724px%27 height=%2724px%27 fill=%27rgb(97,127,137)%27 viewBox=%270 0 256 256%27%3e%3cpath d=%27M181.66,170.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-48-48a8,8,0,0,1,11.32-11.32L128,212.69l42.34-42.35A8,8,0,0,1,181.66,170.34Zm-96-84.68L128,43.31l42.34,42.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,85.66Z%27%3e%3c/path%3e%3c/svg%3e'); font-family: Manrope, &quot;Noto Sans&quot;, sans-serif;"
    >
      <div class="layout-container flex h-full grow flex-col">
        <!-- 导航栏 -->
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f1f3f4] px-10 py-3">
          <div class="flex items-center gap-4 text-[#121516]">
            <div class="size-16">
              <img src="figures/logo.jpg" alt="Orenda Spa Logo" class="w-full h-full object-contain" />
            </div>
            <h2 class="text-[#121516] text-lg font-bold leading-tight tracking-[-0.015em]">Orenda Spa</h2>
          </div>
          <div class="flex flex-1 justify-end gap-8">
            <div class="flex items-center gap-9">
              <a class="text-[#121516] text-sm font-medium leading-normal" href="index.html">Home</a>
              <a class="text-[#121516] text-sm font-medium leading-normal" href="services.html">Services</a>
              <a class="text-[#121516] text-sm font-medium leading-normal" href="events.html">Events</a>
              <a class="text-[#121516] text-sm font-medium leading-normal" href="about.html">About</a>
              <a class="text-[#121516] text-sm font-medium leading-normal" href="contact.html">Contact</a>
            </div>
            <a
              href="booking.html"
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#b2d8e5] text-[#121516] text-sm font-bold leading-normal tracking-[0.015em]"
            >
              <span class="truncate">Book Now</span>
            </a>
          </div>
        </header>

        <!-- 主体预约表单 -->
        <div class="px-40 flex flex-1 justify-center py-5">
          <form id="booking-form" class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <div class="flex flex-wrap justify-between gap-3 p-4">
              <div class="flex min-w-72 flex-col gap-3">
                <p class="text-[#111618] tracking-light text-[32px] font-bold leading-tight">Book an Appointment</p>
                <p class="text-[#617f89] text-sm font-normal leading-normal">Select your desired service, date, and time to schedule your visit.</p>
              </div>
            </div>

            <!-- 服务选择 -->
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <select
                  name="service"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111618] focus:outline-0 focus:ring-0 border border-[#dbe3e6] bg-white focus:border-[#dbe3e6] h-14 bg-[image:--select-button-svg] placeholder:text-[#617f89] p-[15px] text-base font-normal leading-normal"
                  required
                >
                  <option value="" selected disabled>Select Service</option>
                  <option>Facial Treatments</option>
                  <option>Back & Foot Treatments</option>
                  <option>Waxing (at least 12 hours in advance)</option>
                </select>
              </label>
            </div>

            <!-- 日期选择 -->
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  type="date"
                  name="date"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111618] focus:outline-0 focus:ring-0 border border-[#dbe3e6] bg-white focus:border-[#dbe3e6] h-14 placeholder:text-[#617f89] p-[15px] text-base font-normal leading-normal"
                  required
                />
              </label>
            </div>

            <!-- 时间选择 -->
            <h3 class="text-[#111618] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Available Times</h3>
            <div class="flex gap-3 p-3 flex-wrap pr-4">
              <label class="flex items-center gap-x-2 cursor-pointer">
                <input type="radio" class="hidden peer" name="time" required value="Morning" />
                <span class="peer-checked:bg-[#13b5eb] peer-checked:text-white flex h-8 items-center justify-center gap-x-2 rounded-lg bg-[#f0f3f4] px-4 text-[#111618] text-sm font-medium leading-normal">Morning</span>
              </label>
              <label class="flex items-center gap-x-2 cursor-pointer">
                <input type="radio" class="hidden peer" name="time" value="Afternoon" />
                <span class="peer-checked:bg-[#13b5eb] peer-checked:text-white flex h-8 items-center justify-center gap-x-2 rounded-lg bg-[#f0f3f4] px-4 text-[#111618] text-sm font-medium leading-normal">Afternoon</span>
              </label>
            </div>

            <!-- 可选therapist -->
            <h3 class="text-[#111618] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Select Therapist (Optional)</h3>
            <div class="flex gap-3 p-3 flex-wrap pr-4">
              <label class="flex items-center gap-x-2 cursor-pointer">
                <input type="radio" class="hidden peer" name="therapist" value="Banyan" />
                <span class="peer-checked:bg-[#13b5eb] peer-checked:text-white flex h-8 items-center justify-center gap-x-2 rounded-lg bg-[#f0f3f4] px-4 text-[#111618] text-sm font-medium leading-normal">Banyan</span>
              </label>
            </div>

            <!-- 用户信息 -->
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  name="client-name"
                  required
                  placeholder="Your Name"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111618] focus:outline-0 focus:ring-0 border border-[#dbe3e6] bg-white focus:border-[#dbe3e6] h-14 placeholder:text-[#617f89] p-[15px] text-base font-normal leading-normal"
                />
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  name="client-email"
                  required
                  type="email"
                  placeholder="Your Email"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111618] focus:outline-0 focus:ring-0 border border-[#dbe3e6] bg-white focus:border-[#dbe3e6] h-14 placeholder:text-[#617f89] p-[15px] text-base font-normal leading-normal"
                />
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  name="client-phone"
                  required
                  type="tel"
                  placeholder="Your Phone Number"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111618] focus:outline-0 focus:ring-0 border border-[#dbe3e6] bg-white focus:border-[#dbe3e6] h-14 placeholder:text-[#617f89] p-[15px] text-base font-normal leading-normal"
                />
              </label>
            </div>
            <div class="flex px-4 py-3 justify-end">
              <button
                id="submit-btn"
                type="submit"
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#13b5eb] text-[#111618] text-sm font-bold leading-normal tracking-[0.015em]"
              >
                <span class="truncate">Book Appointment</span>
              </button>
            </div>
            <!-- 提交结果反馈 -->
            <div id="booking-message" class="px-4 py-2 font-bold"></div>
          </form>
        </div>
      </div>
    </div>
    <!-- JS for AJAX booking -->
    <script>
      document.getElementById('booking-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        const form = e.target;
        const submitBtn = document.getElementById('submit-btn');
        const msgDiv = document.getElementById('booking-message');
        msgDiv.textContent = '';
        msgDiv.className = "px-4 py-2 font-bold";
        submitBtn.disabled = true;
        submitBtn.querySelector('span').textContent = 'Submitting...';

        const service = form.querySelector('[name="service"]').value;
        const date = form.querySelector('[name="date"]').value;
        const time = form.querySelector('[name="time"]:checked');
        const therapist = form.querySelector('[name="therapist"]:checked');
        const name = form.querySelector('[name="client-name"]').value;
        const email = form.querySelector('[name="client-email"]').value;
        const phone = form.querySelector('[name="client-phone"]').value;

        const data = {
          service,
          date,
          time: time ? time.value : '',
          therapist: therapist ? therapist.value : '',
          name,
          email,
          phone
        };

        try {
          const res = await fetch('http://localhost:3000/api/bookings', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
          });
          let result;
          try {
            result = await res.json();
          } catch {
            result = {};
          }
          if (res.ok) {
            msgDiv.textContent = "Appointment booked successfully!";
            msgDiv.className = "px-4 py-2 font-bold text-green-600";
            form.reset();
          } else {
            msgDiv.textContent = result.error || "Booking failed. Please try again.";
            msgDiv.className = "px-4 py-2 font-bold text-red-600";
          }
        } catch (err) {
          msgDiv.textContent = "Network error. Please try again.";
          msgDiv.className = "px-4 py-2 font-bold text-red-600";
        }
        submitBtn.disabled = false;
        submitBtn.querySelector('span').textContent = 'Book Appointment';
      });
    </script>

    <!-- Footer -->
    <footer class="flex justify-center">
      <div class="flex max-w-[960px] flex-1 flex-col">
        <footer class="flex flex-col gap-6 px-5 py-10 text-center @container">
          <div class="flex flex-wrap items-center justify-center gap-6 @[480px]:flex-row @[480px]:justify-around">
            <a class="text-[#6a7b81] text-base font-normal leading-normal min-w-40" href="#">Privacy Policy</a>
            <a class="text-[#6a7b81] text-base font-normal leading-normal min-w-40" href="#">Terms of Service</a>
            <a class="text-[#6a7b81] text-base font-normal leading-normal min-w-40" href="contact.html">Contact Us</a>
          </div>
          <div class="flex flex-wrap justify-center gap-4">
            <a href="https://www.instagram.com/orendaspa2025?igsh=anl5M3kyMHd5bG84&utm_source=qr" target="_blank" rel="noopener noreferrer">
              <!-- Instagram SVG ... -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                  viewBox="0 0 256 256" class="w-6 h-6 text-[#6a7b81] hover:text-[#b2d8e5] transition">
                <path
                  d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160ZM176,24H80A56.06,56.06,0,0,0,24,80v96a56.06,56.06,0,0,0,56,56h96a56.06,56.06,0,0,0,56-56V80A56.06,56.06,0,0,0,176,24Zm40,152a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V80A40,40,0,0,1,80,40h96a40,40,0,0,1,40,40ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"/>
              </svg>
            </a>
            <a href="https://www.facebook.com/share/p/1EYyjutKAo/" target="_blank" rel="noopener noreferrer">
              <!-- Facebook SVG ... -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                  viewBox="0 0 256 256" class="w-6 h-6 text-[#6a7b81] hover:text-[#b2d8e5] transition">
                <path
                  d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm8,191.63V152h24a8,8,0,0,0,0-16H136V112a16,16,0,0,1,16-16h16a8,8,0,0,0,0-16H152a32,32,0,0,0-32,32v24H96a8,8,0,0,0,0,16h24v63.63a88,88,0,1,1,16,0Z"/>
              </svg>
            </a>
            <a href="https://www.tiktok.com/@orendaspa2025?is_from_webapp=1&sender_device=pc" target="_blank" rel="noopener noreferrer">
              <!-- Tiktok SVG ... -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                  viewBox="0 0 256 256" class="w-6 h-6 text-[#6a7b81] hover:text-[#b2d8e5] transition">
                <path d="M216,72.7a55.85,55.85,0,0,1-32-10.68V152A80,80,0,1,1,104,72a8,8,0,0,1,0,16,64,64,0,1,0,64,64V32a8,8,0,0,1,8-8h24a8,8,0,0,1,0,16H184v32.43a39.87,39.87,0,0,0,32,13.27,8,8,0,0,1,0,16Z"/>
              </svg>
            </a>
          </div>
          <p class="text-[#6a7b81] text-base font-normal leading-normal">© 2025 Orenda Spa. All rights reserved.</p>
        </footer>
      </div>
    </footer>
  </body>
</html>